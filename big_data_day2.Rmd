---
title: "Untitled"
output: html_document
---


```{r setup, include=FALSE}
library(devtools)
install_github("jennybc/googlesheets")
install.packages("googlesheets")
library(googlesheets)
```

Reading a spreadsheet
```{r}
sheets_url="https://docs.google.com/spreadsheets/d/103vUoftv2dLNZ_FcAz08b5ptIkWN4W2RaFn7VF39FJ8/edit#gid=0"
gsurl1=gs_url(sheets_url)
gsurl1
date_accessed=date()
date_accessed

```
Reading first 2 columns

```{r}
head(gs_read(gsurl1, range = cell_cols(1:2)))
```

How many students:
```{r}
dim(gs_read(gsurl1, range = cell_cols(1:2)))[1]
```

Create a logical variable for whether students have more than 2 years of R experience
```{r}

tmp <- gs_read(gsurl1, range = cell_cols(1:3))
library(dplyr)
#exp_2yr <-tmp %>% filter(tmp$R>2)
#tmp %>% filter(tmp$R>2)

result <- with(tmp,as.numeric(tmp$"Years of R experience")>2)

```
Convert the logical variable from #6 into a factor with labels "Skilled" and "Learning"

```{r}
df<-as.factor(result)
levels(df)<- c("Skilled", "Learning")
```

##########JSON
Install stuff
```{r}



github_url = "https://api.github.com/users/jtleek/repos"

install.packages("jsonlite")
library(jsonlite)
jsonData <- fromJSON(github_url)
dim(jsonData)
jsonData$name

```


Exploring
```{r}
table(sapply(jsonData,class))
dim(jsonData$owner)
names(jsonData$owner)



```

Json lab : 

Get Hadley's repo

```{r}
github_url = "https://api.github.com/users/hadley/repos"
jsonData <- fromJSON(github_url)
dim(jsonData)
jsonData$name

```
How many stars does he have on each repository?

```{r}
jsonData$stargazers_count
```



How many open issues are there?

```{r}
jsonData$open_issues_count
```

Web scraping

//*[@id="recounttab"]/table/tbody

recount_url = "http://bowtie-bio.sourceforge.net/recount/"
install.packages("rvest")
library(rvest)
htmlfile = read_html(recount_url)


nds = html_nodes(htmlfile,                
xpath='//*[@id="recounttab"]/table')
dat = html_table(nds)
dat = as.data.frame(dat)
head(dat)

